<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Are Sean and Kiernan Brewing by dropdownmenu</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="stylesheets/material-wfont.css">
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="shortcut icon" href="http://i.imgur.com/ItUMBRb.png">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
    <script src="markdown.js"></script>
    <script src="underscore.min.js"></script>
    <script src="async.js"></script>
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <nav class="navbar navbar-black shadow-z-2">
      <div class="container-fluid navbar-header" style="text-align:center;width:100%;float:left;padding: 15px;">
        <a style="text-align:center;text-color:white;font-size:300%;color:white;" href="http://www.wikihow.com/Brew-Your-Own-Beer">We Should Brew . Beer</a>
        <a style="text-align:center;text-align-vertical:middle;text-color:white;font-size:300%;color:white;" class="pull-right fa-fw" href="https://www.youtube.com/channel/UCSUZx4SwJCRYrEHtofa8Y_g" data-toggle="tooltip" data-placement="bottom" title="Ya, we you tubes."><i class="fa fa-youtube-play"></i></a>
        <a style="text-align:center;text-align-vertical:middle;text-color:white;font-size:300%;color:white;" class="pull-right fa-fw" href="https://www.facebook.com/areseanandkiernanbrewing" data-toggle="tooltip" data-placement="bottom" title="Ya, we use the book of faces."><i class="fa fa-facebook"></i></a>
        <a style="text-align:center;text-align-vertical:middle;text-color:white;font-size:300%;color:white;" class="pull-right fa-fw" href="https://twitter.com/weshouldbrew" data-toggle="tooltip" data-placement="bottom" title="Ya, we twit."><i class="fa fa-twitter"></i></a>
      </div>
    </nav>
    <div class="col-md-4 col-lg-4">
      <div class="banner">
        <div class="line">
          <span>Are Sean</span>
        </div>
        <div class="line">
          <span>and Kiernan</span>
        </div>
        <div class="line">
          <span>Brewing?</span>
        </div>
      </div>
      <div class="thumbnail shadow-z-2">
        <div class="caption">
          <h1 id="stillBrewing-status"></h1>
          <h4 id="stillBrewing-elapsed"></h4>
          <h2 id="stillBrewing-lead"></h2>
          <div id="mostRecentBrews"></div>
        </div>
      </div>
      <div class="thumbnail shadow-z-2">
        <div class="caption">
          <h1>Random Beer Style</h1>
          <h3 id="randomStyle"></h3>
        </div>
      </div>
    </div>
    <div class="col-md-8 col-lg-8">
      <h3>Brewlog</h3>
      <table id="results-table" class="table table-hover shadow-z-2" style="background-color:white;">
        <tr style="border-bottom: 1px solid #ddd;border-top: 1px solid #ddd;">
          <th><i class="fa fa-beer"></i> Name</th>
          <th style="float:right;"><i class="fa fa-calendar"></i> Date</th>
        </tr>
      </table>
    </div>
    <div class="thumbnail shadow-z-2">
      <h3>Wanderers</h3>
      <table>
        <tr>
          <th>Planet</th>
          <th>Symbol</th>
        </tr>
        <tr>
          <td>Mercury</td>
          <td>&#9791;</td>
        </tr>
      </table>
    </div>
    </div>
    <footer class="col-md-12">
      <p>This project is maintained by <a href="https://github.com/dropdownmenu">dropdownmenu</a> | <a href="https://github.com/madtown">madtown</a><small class="pull-right">Hosted on GitHub Pages</small></p>
    </footer>
    <script type="text/x-template", id="row-template">
      <tr style="border-bottom: 1px solid #ddd;">
        <td style="border-bottom: 1px solid #ddd;border-top: 1px solid #ddd;"><i class="fa fa-beer"></i> <%= name %></td>
        <td style="border-bottom: 1px solid #ddd;border-top: 1px solid #ddd;float:right;border-spacing:1px;"><%= date %></td>
      </tr>
      <tr style="display: none;" id="<%= name %>">
        <td colspan="2"><%= html %></td>
      </tr>
    </script>
    <script type="text/javascript">
    /* global markdown, async, $, _ */
    jQuery.fn.rotate = function(degrees) {
           $(this).css({'-webkit-transform' : 'rotate('+ degrees +'deg)',
                 '-moz-transform' : 'rotate('+ degrees +'deg)',
                 '-ms-transform' : 'rotate('+ degrees +'deg)',
                 'transform' : 'rotate('+ degrees +'deg)'});
    };
    
    $(function() {
      var rowTemplate = _.template($('#row-template').html());
      $.get('manifest.json', function(manifest) {
        // put a date object on each brew
        manifest.brews.forEach(function(b) {
          b.date_obj = new Date(b.date);
        });
        manifest.brews.sort(function(a, b) {
          return b.date_obj.getTime() - a.date_obj.getTime();
        });

        // determine if we are 'still brewing'
        var today = new Date();

        var stillBrewing = ((today.getTime() - manifest.brews[0].date_obj.getTime()) / (1000 * 60 * 60 * 24) < 1);
        
        var brewtimeElapsedmilli = (today.getTime() - manifest.brews[0].date_obj.getTime());
        var numdays = Math.floor(brewtimeElapsedmilli / (1000 * 60 * 60 * 24)); 
        var brewtimeElapsed = numdays + " day";
        if (numdays > 1) {
          var brewtimeElapsed = brewtimeElapsed.concat('s')
        }
        // determine time since last brew for brew counter
        
        if (stillBrewing) {
          $('#stillBrewing-status').text('Yes!');
          $('#stillBrewing-lead').text('What are we brewing?');
        } else {
          $('#stillBrewing-status').text('No...');
          $('#stillBrewing-elapsed').text("It's been " + brewtimeElapsed + " since we brewed.");
          $('#stillBrewing-lead').text('What did we brew?');
        }

        // gather the most recent batch
        var batch = [manifest.brews[0]];
        var targetDate = manifest.brews[0].date_obj;
        for (var i = 1; i < manifest.brews.length; i++) {
          if (manifest.brews[i].date_obj.getTime() < targetDate.getTime()) {
            break;
          }
          batch.push(manifest.brews[i]);
        }

        batch.forEach(function(b) {
          var newElem = $('<h3></h3>');
          newElem.text(b.name);
          $('#mostRecentBrews').append(newElem);
        });

        // get a brews recipe and renders its markdown
        function displayBrew(obj, cb) {
          $.get(manifest.base_path + obj.path, function(data) {
            obj.html = markdown.toHTML(data);
            cb(null, obj);
          }).fail(function() {
            console.error('Failed to get recipe for ' + obj.name);
            cb(null, obj);
          });
        }
        $('#icon-dropdown').text('fa fa-beer');
        // render out the table + recipies for brews in the manifest
        async.map(manifest.brews, displayBrew, function(err, newObjs) {
          newObjs.forEach(function(o) {
            var fragment = $(rowTemplate({
              name: o.name,
              date: o.date,
              html: o.html
            }));
            fragment.first('tr').click(function() {
              console.log('you clicked me!');
              $(this).find('i').rotate(45); 
              fragment.last('tr').toggle("slow");
            });
            $('#results-table tbody').append(fragment);
          });
        });
        
        var allStyles = ["American-Style Wheat Beer", "Subcategory: Light American Wheat Ale or Lager without Yeast", "Subcategory: Dark American Wheat Beer without Yeast", "American-Style Wheat Beer With Yeast", "Subcategory: Light American Wheat Beer with Yeast", "Subcategory: Dark American Wheat Beer with Yeast", "American-Style Fruit Beer", "Fruit Wheat Beer", "Belgian-Style Fruit Beer", "Pumpkin Beer", "Field Beer", "Herb and Spice Beer", "Chocolate Beer", "Coffee Beer", "Specialty Beer", "Rye Beer", "Subcategory: Rye Ale or Lager with or without Yeast", "Subcategory: German-Style Rye Ale with or without Yeast", "Specialty Honey Beer", "Session Beer", "Other Strong Beer", "Subcategory: Other Strong Ale or Lager", "Subcategory: American-Style Imperial Porter", "Subcategory: American-Style Wheat Wine Ale", "Subcategory: American-Style Ice Lager", "Subcategory: American-Style Malt Liquor", "Experimental Beer", "Subcategory: Experimental Beer", "Subcategory: Japanese Sake-Yeast Beer", "Subcategory: Wild Beer", "Fresh or Wet Hop Ale", "Indigenous/Regional Beer", "Historical Beer", "Subcategory: Historical Beer", "Subcategory: Dutch-Style Kuit Beer", "Subcategory: Grodziskie", "Subcategory: Adambier", "Gluten-Free Beer", "American-Belgo-Style Ale", "Subcategory: Pale American-Belgo-Style Ale", "Subcategory: Dark American-Belgo-Style Ale", "American-Style Sour Ale", "Subcategory: American-Style Sour Ale", "Subcategory: Fruited American-Style Sour Ale", "American-Style Brett Beer", "Wood- and Barrel-Aged Beer", "Subcategory: Wood- and Barrel-Aged Pale to Amber Beer", "Subcategory: Wood- and Barrel-Aged Dark Beer", "Wood- and Barrel-Aged Strong Beer", "Wood- and Barrel-Aged Sour Beer", "Subcategory: Wood- and Barrel-Aged Sour Beer", "Subcategory: Fruited Wood- and Barrel-Aged Sour Beer", "Aged Beer", "Kellerbier or Zwickelbier", "Subcategory: Unfiltered German-Style Lager", "Subcategory: Unfiltered German-Style Ale", "Smoke Beer", "Subcategory: Bamberg-Style Weiss Rauchbier (Helles or Dunkel)", "Subcategory: Bamberg-Style Helles Rauchbier", "Subcategory: Bamberg-Style Märzen Rauchbier", "Subcategory: Bamberg-Style Bock Rauchbier", "Subcategory: Smoke Porter", "Subcategory: Other Smoke Beer", "American-Style or International-Style Pilsener", "Subcategory: American-Style Pilsener", "Subcategory: International-Style Pilsener", "German-Style Pilsener", "Bohemian-Style Pilsener", "Munich-Style Helles", "Dortmunder or German-Style Oktoberfest", "Subcategory: Dortmunder/European-Style Export", "Subcategory: German-Style Oktoberfest/Wiesn", "American-Style Lager or Light Lager", "Subcategory: American-Style Lager", "Subcategory: American-Style Light (Low Calorie) & Low Carbohydrate Lager", "American-Style Cream Ale", "Vienna-Style Lager", "German-Style Märzen", "American-Style Amber Lager", "Subcategory: American-Style Amber Lager", "Subcategory: California Common Beer", "Subcategory: American-Style Märzen/Oktoberfest", "European-Style Dunkel", "American-Style Dark Lager", "German-Style Schwarzbier", "Bock", "Subcategory: Traditional German-Style Bock", "Subcategory: German-Style Heller Bock/Maibock", "German-Style Doppelbock or Eisbock", "Subcategory: German-Style Doppelbock", " Subcategory: German-Style Eisbock", "Baltic-Style Porter", "Golden or Blonde Ale", "German-Style Kölsch", "English-Style Summer Ale", "Classic English-Style Pale Ale", "English-Style India Pale Ale", "International-Style Pale Ale", "Subcategory: International-Style Pale Ale", "Subcategory: Australian-Style Pale Ale", "American-Style Pale Ale", "American-Style Strong Pale Ale", "American-Style India Pale Ale", "Imperial India Pale Ale", "American-Style Amber/Red Ale", "Imperial Red Ale", "English-Style Mild Ale", "Subcategory: English-Style Pale Mild Ale", "Subcategory: English-Style Dark Mild Ale", "Ordinary or Special Bitter", "Subcategory: Ordinary Bitter", "Subcategory: Special Bitter or Best Bitter", "Extra Special Bitter", "Subcategory: English-Style Extra Special Bitter", "Subcategory: American-Style Extra Special Bitter", "Scottish-Style Ale", "Subcategory: Scottish-Style Light Ale", "Subcategory: Scottish-Style Heavy Ale", "Subcategory: Scottish-Style Export Ale", "Irish-Style Red Ale", "English-Style Brown Ale", "American-Style Brown Ale", "American-Style Black Ale", "German-Style Sour Ale", "Subcategory: Berliner-Style Weisse", "Subcategory: Leipzig-Style Gose", "German-Style Altbier", "South German-Style Hefeweizen", "German-Style Wheat Ale", "Subcategory: German-Style Leichtes Weizen", "Subcategory: South German-Style Kristal Weizen", "Subcategory: South German-Style Bernsteinfarbenes Weizen/Weissbier", "Subcategory: South German-Style Dunkel Weizen", "Subcategory: South German-Style Weizenbock", "Belgian-Style Blonde Ale or Pale Ale", "Subcategory: Belgian-Style Blonde Ale", "Subcategory: Belgian-Style Pale Ale", "Belgian-Style Witbier", "French & Belgian-Style Saison", "Belgian- and French-Style Ale", "Subcategory: French-Style Bière de Garde", "Subcategory: Other Belgian and French Ale", "Belgian-Style Lambic or Sour Ale", "Subcategory: Belgian-Style Lambic", "Subcategory: Belgian-Style Gueuze Lambic", "Subcategory: Belgian-Style Fruit Lambic", "Subcategory: Belgian-Style Flanders Oud Bruin or Oud Red Ale", "Subcategory: Other Belgian-Style Sour Ale", "Belgian-Style Abbey Ale", "Subcategory: Belgian-Style Dubbel", "Subcategory: Belgian-Style Quadrupel", "Subcategory: Other Belgian-Style Abbey Ale", "Belgian-Style Tripel", "Belgian-Style Strong Specialty Ale", "Subcategory: Belgian-Style Pale Strong Ale", "Subcategory: Belgian-Style Dark Strong Ale", "Other Belgian-Style Ale", "Subcategory: Other Belgian-Style Ale", "Subcategory: Other Belgian-Style Strong Specialty Ale", "Subcategory: Belgian-Style Table Beer", "Brown Porter", "Robust Porter", "Classic Irish-Style Dry Stout", "Foreign-Style Stout", "American-Style Stout", "Sweet Stout or Cream Stout", "Oatmeal Stout", "Imperial Stout", "Subcategory: British-Style Imperial Stout", "Subcategory: American-Style Imperial Stout", "Scotch Ale", "Subcategory: Traditional Scotch Ale", "Subcategory: Peated Scotch Ale", "Old Ale or Strong Ale", "Subcategory: Old Ale", "Subcategory: Strong Ale", "Barley Wine-Style Ale", "Subcategory: British-Style Barley Wine Ale", "Subcategory: American-Style Barley Wine Ale", "Wood- and Barrel-Aged Strong Stout"]
        var randomStyle = allStyles[Math.floor(Math.random() * allStyles.length)];
        $('#randomStyle').text(randomStyle);
      });
    });
    </script>
    <script src="javascripts/scale.fix.js"></script>
  </body>
</html>
